momentum={Coordinate:function(a,b){this.x=a||0;this.y=b||0}};momentum.Coordinate.prototype.clone=function(){return new momentum.Coordinate(this.x,this.y)};momentum.Coordinate.prototype.clamp=function(a,b){this.x=Math.min(Math.max(this.x,a),b);this.y=Math.min(Math.max(this.y,a),b)};momentum.Coordinate.prototype.clampX=function(a,b){this.x=Math.min(Math.max(this.x,a),b)};momentum.Coordinate.prototype.clampY=function(a,b){this.y=Math.min(Math.max(this.y,a),b)};
momentum.TrackingPoint=function(a){this.position=a;this.timestamp=Date.now()};
momentum.Element=function(a){this.target_=a||document.documentElement;this.targetBounds_=this.target_.getBoundingClientRect();this.position_=new momentum.Coordinate;this.trackingPoints_=[];this.startPosition_=new momentum.Coordinate;this.lastVelocity_=new momentum.Coordinate;this.bounds_={minX:0,maxX:0,minY:0,maxY:0};this.allowDecelerating_=this.dragging_=this.hasBoundsY_=this.hasBoundsX_=this.hasBounds_=!1;this.resetTimerId_=-1;this.startTime_=0;this.moveCallbacks_=[];this.downCallback_=null;this.precision_=
3;this.friction_=.035;this.restitution_=0;this.threshold_=5;this.resetMs_=50;this.maxVelocity_=70};
momentum.Element.prototype.init=function(){"ontouchstart"in window||navigator.msMaxTouchPoints?(this.target_.addEventListener("touchend",this.handleUserUp_.bind(this),!1),this.target_.addEventListener("touchcancel",this.handleUserUp_.bind(this),!1),this.target_.addEventListener("touchstart",this.handleUserDown_.bind(this),!1),this.target_.addEventListener("touchmove",this.handleUserMove_.bind(this),!1)):(this.target_.addEventListener("mouseup",this.handleUserUp_.bind(this),!1),this.target_.addEventListener("mouseleave",
this.handleUserUp_.bind(this),!1),this.target_.addEventListener("mousedown",this.handleUserDown_.bind(this),!1),this.target_.addEventListener("mousemove",this.handleUserMove_.bind(this),!1))};momentum.Element.prototype.onMove=function(a,b){this.moveCallbacks_.push(a.bind(b||this))};momentum.Element.prototype.onDown=function(a,b){this.downCallback_=a.bind(b||this)};momentum.Element.prototype.setFriction=function(a){this.friction_=Math.min(Math.max(a,0),1)};
momentum.Element.prototype.setThreshold=function(a){this.threshold_=a};momentum.Element.prototype.setRestitution=function(a){this.restitution_=Math.min(Math.max(a,0),1)};momentum.Element.prototype.setMaxVelocity=function(a){this.maxVelocity_=Math.max(a,0)};momentum.Element.prototype.getFriction=function(){return this.friction_};momentum.Element.prototype.getThreshold=function(){return this.threshold_};momentum.Element.prototype.getRestitution=function(){return this.restitution_};
momentum.Element.prototype.getMaxVelocity=function(){return this.maxVelocity_};momentum.Element.prototype.setPosition=function(a,b){this.position_.x=a;this.position_.y=b};momentum.Element.prototype.setBounds=function(a,b,c,d){this.bounds_.minX=a||0;this.bounds_.maxX=b||0;this.bounds_.minY=c||0;this.bounds_.maxY=d||0;this.hasBoundsX_=0!=this.bounds_.minX||0!=this.bounds_.maxX;this.hasBoundsY_=0!=this.bounds_.minY||0!=this.bounds_.maxY;this.hasBounds_=this.hasBoundsX_||this.hasBoundsY_};
momentum.Element.prototype.update=function(){this.positionUpdated_()};momentum.Element.prototype.getRelativeElementPosition=function(a){a=a.getBoundingClientRect();return new momentum.Coordinate(a.left-this.targetBounds_.left,a.top-this.targetBounds_.top)};
momentum.Element.prototype.getEventPosition_=function(a){var b=new momentum.Coordinate;a.hasOwnProperty("touches")?(b.x=a.touches[0].clientX-this.targetBounds_.left,b.y=a.touches[0].clientY-this.targetBounds_.top):(b.x=a.clientX-this.targetBounds_.left,b.y=a.clientY-this.targetBounds_.top);return b};
momentum.Element.prototype.handleUserDown_=function(a){a=this.getEventPosition_(a);if(!this.downCallback_||this.downCallback_(a.x,a.y))this.dragging_=!0,this.allowDecelerating_=!1,this.startPosition_.x=this.position_.x=a.x,this.startPosition_.y=this.position_.y=a.y,this.startTime_=Date.now(),this.lastVelocity_.x=0,this.lastVelocity_.y=0,this.positionUpdated_(),this.collectTrackingPoints_()};
momentum.Element.prototype.collectTrackingPoints_=function(){this.addTrackingPoint_();this.updateTrackingPoints_();this.dragging_&&this.requestAnimationFrame_(this.collectTrackingPoints_,this)};momentum.Element.prototype.addTrackingPoint_=function(){this.trackingPoints_.push(new momentum.TrackingPoint(this.position_.clone()))};
momentum.Element.prototype.handleUserMove_=function(a){this.dragging_&&(a.preventDefault(),a.stopPropagation(),a=this.getEventPosition_(a),this.position_.x=a.x,this.position_.y=a.y,this.positionUpdated_())};
momentum.Element.prototype.updateTrackingPoints_=function(){for(var a=Date.now(),b=[],c=0,d=this.trackingPoints_.length;c<d;c++)a-this.trackingPoints_[c].timestamp>=this.resetMs_&&b.push(c);c=0;for(d=b.length;c<d;c++)this.trackingPoints_.splice(b[c],1);0<this.trackingPoints_.length&&(a=this.trackingPoints_[0],this.startPosition_=a.position,this.startTime_=a.timestamp)};
momentum.Element.prototype.handleUserUp_=function(a){this.dragging_&&(this.dragging_=!1,this.allowDecelerating_=!0,a=(Date.now()-this.startTime_)/15,this.lastVelocity_.x=(this.position_.x-this.startPosition_.x)/a,this.lastVelocity_.y=(this.position_.y-this.startPosition_.y)/a,this.lastVelocity_.clamp(-this.maxVelocity_,this.maxVelocity_),this.clearStartProperties_(),this.trackingPoints_=[],(Math.abs(this.lastVelocity_.x)>=this.threshold_||Math.abs(this.lastVelocity_.y)>=this.threshold_)&&this.decelerate_())};
momentum.Element.prototype.clearStartProperties_=function(){this.startPosition_.x=0;this.startTime_=this.startPosition_.y=0};
momentum.Element.prototype.applyBounds_=function(){this.hasBounds_&&(this.hasBoundsX_&&(this.position_.clampX(this.bounds_.minX,this.bounds_.maxX),this.position_.x<=this.bounds_.minX||this.position_.x>=this.bounds_.maxX)&&(this.lastVelocity_.x=(0>=this.lastVelocity_.x?Math.abs(this.lastVelocity_.x):-this.lastVelocity_.x)*this.restitution_),this.hasBoundsY_&&(this.position_.clampY(this.bounds_.minY,this.bounds_.maxY),this.position_.y<=this.bounds_.minY||this.position_.y>=this.bounds_.maxY)&&(this.lastVelocity_.y=
(0>=this.lastVelocity_.y?Math.abs(this.lastVelocity_.y):-this.lastVelocity_.y)*this.restitution_))};momentum.Element.prototype.positionUpdated_=function(){this.applyBounds_();for(var a=0,b=this.moveCallbacks_.length;a<b;a++)this.moveCallbacks_[a](this.position_.x,this.position_.y,this.lastVelocity_.x,this.lastVelocity_.y)};momentum.Element.prototype.getPrecisionNumber_=function(a,b){a=a.toString();return parseFloat(a.substring(0,a.indexOf(".")+(1+b)))||0};
momentum.Element.prototype.decelerate_=function(){this.allowDecelerating_&&(0<Math.abs(this.lastVelocity_.x)&&(this.lastVelocity_.x=this.getPrecisionNumber_(this.lastVelocity_.x*(1-this.friction_),this.precision_),this.position_.x+=this.lastVelocity_.x),0<Math.abs(this.lastVelocity_.y)&&(this.lastVelocity_.y=this.getPrecisionNumber_(this.lastVelocity_.y*(1-this.friction_),this.precision_),this.position_.y+=this.lastVelocity_.y),this.lastVelocity_.clamp(-this.maxVelocity_,this.maxVelocity_),this.positionUpdated_(),
(0<Math.abs(this.lastVelocity_.x)||0<Math.abs(this.lastVelocity_.y))&&this.requestAnimationFrame_(this.decelerate_,this))};momentum.Element.prototype.requestAnimationFrame_=function(a,b){(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame)(a.bind(b))};